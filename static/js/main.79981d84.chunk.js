(this.webpackJsonpvirtualtheater=this.webpackJsonpvirtualtheater||[]).push([[0],{33:function(e,t,a){e.exports=a(63)},38:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),l=a.n(s),o=(a(38),a(7)),c=a(8),i=a(2),u=a(10),m=a(9),p=a(1),d=a.n(p),h=a(6),v=a(5),g=a.n(v),b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isFillingOutForm:!1,rating:n.props.rating,description:n.props.desc,occured:!1},n.handleClick=n.handleClick.bind(Object(i.a)(n)),n.submitForm=n.submitForm.bind(Object(i.a)(n)),n.takeRating=n.takeRating.bind(Object(i.a)(n)),n.takeDescription=n.takeDescription.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.state.isFillingOutForm&&!this.state.occured&&(document.getElementById("rating").value=this.props.rating,document.getElementById("desc").value=this.props.desc,this.setState({occured:!0}))}},{key:"takeRating",value:function(e){this.setState({rating:parseFloat(e.target.value)})}},{key:"takeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"handleClick",value:function(){this.setState((function(e){return{isFillingOutForm:!e.isFillingOutForm}}))}},{key:"postApi",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/reviews",t);case 3:a=e.sent,console.log(a.data),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"submitForm",value:function(e){e.preventDefault();var t={id:this.props.reviewId,description:this.state.description,date:(new Date).toUTCString(),rating:this.state.rating,userId:this.props.userId,movieId:this.props.movieId};this.postApi(t),this.setState((function(e){return{isFillingOutForm:!e.isFillingOutForm}}))}},{key:"render",value:function(){return this.state.isFillingOutForm?r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("label",null,"Rating:",r.a.createElement("input",{type:"number",onChange:this.takeRating,id:"rating",placeholder:"0.0"}),r.a.createElement("br",null)),r.a.createElement("label",null,"Comment:",r.a.createElement("input",{type:"text",onChange:this.takeDescription,id:"desc",placeholder:"Comment"}),r.a.createElement("br",null)),r.a.createElement("label",null,r.a.createElement("input",{type:"submit",value:"Submit"})))):r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleClick},this.props.bttonText))}}]),a}(n.Component),f=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={searchTerm:"",movieHTML:"",reviewHTML:"",users:[],purchase:""},n}return Object(c.a)(a,[{key:"callApi",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,a,n,s,l,o,c,i,u=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://api.themoviedb.org/3/movie/".concat(this.props.id,"?api_key=").concat("4c97d52803b7ca7abda8da0f425b880b","&language=en-US"));case 3:return t=e.sent,e.next=6,g.a.get("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/reviews");case 6:return a=e.sent,e.next=9,g.a.get("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/accounts");case 9:n=e.sent,s=t.data,l=n.data,o=a.data.filter((function(e){return e.movieId===s.id})),console.log(o),console.log(n.data),c=r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w300"+s.poster_path}),r.a.createElement("div",{className:"main"},r.a.createElement("h4",null,s.title),r.a.createElement("h5",null,s.release_date),r.a.createElement("div",null,"Runtime: ",s.runtime," mins"),r.a.createElement("div",null,"Genre: ",s.genres.map((function(e){return r.a.createElement("p",null,e.name)}))),r.a.createElement("div",null,r.a.createElement("a",{href:s.homepage,target:"_blank"},"Check out the website for ",s.title)),r.a.createElement("p",null,s.overview),r.a.createElement("div",null,"Production provided by: ",s.production_companies.map((function(e){return r.a.createElement("p",null,e.name)}))),r.a.createElement("div",null,"Produced in the following countries: ",s.production_countries.map((function(e){return r.a.createElement("p",null,e.name)}))))),r.a.createElement("button",{onClick:function(){u.props.balance-19.99>0?(u.postDatabase("transactions",{title:s.title,date:(new Date).toUTCString(),image:"https://image.tmdb.org/t/p/w200"+s.poster_path,price:19.99,userId:u.props.userId}),u.postDatabase("accounts",{id:u.props.userId,balance:u.props.balance-19.99,email:u.props.user.email,password:u.props.user.password,name:u.props.user.name,address:u.props.user.address}),console.log(u.props.balance-19.99),u.setState({purchase:r.a.createElement("p",null,"Congrats on your purchase!")})):u.setState({purchase:r.a.createElement("p",null,"You dont have the neccessary funds")})}},"Buy the movie for $19.99"),r.a.createElement("div",null,this.state.purchase),r.a.createElement(b,{bttonText:"Leave a review",filling:!1,userId:this.props.userId,reviewId:null,movieId:this.props.id,rating:"",desc:""})),i=o.map((function(e){return r.a.createElement("div",{className:"comments",id:e.id},console.log(l.filter((function(t){return t.id===e.userId}))),r.a.createElement("p",null,l.filter((function(t){return t.id===e.userId}))[0].name),r.a.createElement("p",null,e.rating),r.a.createElement("p",null,e.date),r.a.createElement("p",null,e.description),l.filter((function(t){return t.id===e.userId}))[0].id===u.props.userId?r.a.createElement("div",null,r.a.createElement(b,{bttonText:"Edit your post",filling:!0,userId:u.props.userId,reviewId:e.id,movieId:u.props.id,rating:e.rating,desc:e.description}),r.a.createElement("button",{onClick:function(){u.deleteApi("reviews",e.id),document.getElementById(e.id).style.display="none"}},"Delete your post")):r.a.createElement("div",null))})),this.setState({movieHTML:c,reviewHTML:i}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.callApi()}},{key:"postDatabase",value:function(){var e=Object(h.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/"+t,a);case 3:n=e.sent,console.log(n.data),console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteApi",value:function(){var e=Object(h.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("This is running",a),e.prev=1,e.next=4,g.a.delete("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/"+t+"/"+a);case 4:n=e.sent,console.log(n.data),console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"movie"},r.a.createElement("div",null,this.state.movieHTML),r.a.createElement("h1",null,"Check out what our others users have said"),r.a.createElement("div",null,this.state.reviewHTML))}}]),a}(n.Component),w=a(12),E=a(3),k=(a(57),function(){return r.a.createElement("div",{className:"nav-bar"},r.a.createElement(w.b,{to:"/"},"Search")," ",r.a.createElement("br",null),r.a.createElement(w.b,{to:"/Profile"},"Profile")," ",r.a.createElement("br",null),r.a.createElement(w.b,{to:"/Movie"},"Your last viewed Movie"))}),y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={searchTerm:"",resultsHTML:"",movies:[]},n.makeSearch=n.makeSearch.bind(Object(i.a)(n)),n.takeTerm=n.takeTerm.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"callApi",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://api.themoviedb.org/3/discover/movie?api_key=".concat("4c97d52803b7ca7abda8da0f425b880b"));case 3:t=e.sent,console.log(t.data),a=t.data.results.map((function(e){return r.a.createElement(w.b,{to:"/Movie",onClick:function(){return n.props.capture(e.id)}},r.a.createElement("div",{style:{background:'url("https://image.tmdb.org/t/p/w200'.concat(e.poster_path,'") no-repeat')}},r.a.createElement("div",{className:"cell"},r.a.createElement("h4",null,e.title),r.a.createElement("h5",null,e.release_date),r.a.createElement("p",null,e.overview))))})),this.setState({resultsHTML:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.callApi()}},{key:"postDatabase",value:function(){var e=Object(h.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v2/"+t,a);case 3:n=e.sent,console.log(n.data),console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"makeSearch",value:function(e){e.preventDefault(),this.callApi()}},{key:"takeTerm",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"Check out this awesome selection of movies"),r.a.createElement("div",{className:"grid"},this.state.resultsHTML))}}]),a}(n.Component),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).signInHandler=function(e){e.preventDefault();var t=n.state.accounts.findIndex((function(e){return e.email===n.state.email&&e.password===n.state.password}));-1!=t?(console.log(n.state.accounts[t]),n.props.Allowed(n.state.accounts[t])):n.setState({error:r.a.createElement("div",null,"Sorry, no login was found")})},n.onChangeHandler=function(e){"userPassword"===e.target.name?n.setState({password:e.target.value}):"email"===e.target.name&&n.setState({email:e.target.value})},n.state={accounts:[],password:"",error:"",email:""},n.onChangeHandler=n.onChangeHandler.bind(Object(i.a)(n)),n.signInHandler=n.signInHandler.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.callApi()}},{key:"callApi",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/accounts");case 3:t=e.sent,this.setState({accounts:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"Sign In"),r.a.createElement("div",null,this.state.error,r.a.createElement("form",null,r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",placeholder:"email",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"userPassword",placeholder:"Password",onChange:this.onChangeHandler}),r.a.createElement("button",{onClick:this.signInHandler},"Sign in")),r.a.createElement(w.b,{to:"/SignUp"},"Don't have an account? Sign up here")))}}]),a}(n.Component),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createUserHandler=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.password,address:n.state.address,name:n.state.name,balance:1e4};n.postApi(t),n.setState({message:r.a.createElement("p",null,"Congrats, your profile was created successfully")})},n.onChangeHandler=function(e){"name"===e.target.name?n.setState({name:e.target.value}):"userPassword"===e.target.name?n.setState({password:e.target.value}):"email"===e.target.name?n.setState({email:e.target.value}):"address"===e.target.name&&n.setState({address:e.target.value})},n.state={accounts:[],name:"",password:"",error:"",email:"",address:""},n.onChangeHandler=n.onChangeHandler.bind(Object(i.a)(n)),n.createUserHandler=n.createUserHandler.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"postApi",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/accounts",t);case 3:a=e.sent,console.log(a.data),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",null,this.state.message,r.a.createElement("form",null,r.a.createElement("label",null,"Name:"),r.a.createElement("input",{type:"text",name:"name",placeholder:"name",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"userPassword",placeholder:"Password",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",placeholder:"email",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Address:"),r.a.createElement("input",{type:"address",name:"address",placeholder:"address",onChange:this.onChangeHandler}),r.a.createElement("button",{onClick:this.createUserHandler},"Sign up")),r.a.createElement(w.b,{to:"/"},"Already have an account? Sign in here")))}}]),a}(n.Component),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createUserHandler=function(e){e.preventDefault();var t={id:n.props.userId,email:n.state.email,password:n.state.password,address:n.state.address,name:n.state.name,balance:n.state.balance};n.postApi(t),n.setState((function(e){return{message:r.a.createElement("p",null,"Congrats, your profile was updated successfully"),isFillingOutForm:!e.isFillingOutForm}}))},n.onChangeHandler=function(e){"newname"===e.target.name?n.setState({name:e.target.value}):"newuserPassword"===e.target.name?n.setState({password:e.target.value}):"newemail"===e.target.name?n.setState({email:e.target.value}):"newaddress"===e.target.name?n.setState({address:e.target.value}):"newbalance"===e.target.name&&n.setState({balance:e.target.value})},n.state={isFillingOutForm:!1,movies:[],name:n.props.userName,password:n.props.userPassword,error:"",email:n.props.userEmail,address:n.props.userAddress,balance:n.props.userBalance,occured:!1,movieHTML:[""]},n.onChangeHandler=n.onChangeHandler.bind(Object(i.a)(n)),n.createUserHandler=n.createUserHandler.bind(Object(i.a)(n)),n.switchEdit=n.switchEdit.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.callApi()}},{key:"componentDidUpdate",value:function(){this.state.occured||(document.getElementById("newname").value=this.state.name,document.getElementById("newuserPassword").value=this.state.password,document.getElementById("newemail").value=this.state.email,document.getElementById("newaddress").value=this.state.address,document.getElementById("newbalance").value=this.state.balance,this.setState({occured:!0}))}},{key:"callApi",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,a,n,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/transactions");case 3:t=e.sent,a=t.data.filter((function(e){return e.userId===s.props.userId})),n=a.map((function(e){return r.a.createElement("img",{src:e.image})})),this.setState({movies:t.data,movieHTML:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"postApi",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("https://cors-anywhere.herokuapp.com/https://nameless-dawn-18115.herokuapp.com/walter_api/v3/accounts",t);case 3:a=e.sent,console.log(a.data),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"switchEdit",value:function(){this.setState((function(e){return{isFillingOutForm:!e.isFillingOutForm}}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Movie"},r.a.createElement("div",null,this.state.message,r.a.createElement("form",null,r.a.createElement("label",null,"Name:"),r.a.createElement("input",{type:"text",id:"newname",name:"newname",placeholder:"name",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",id:"newuserPassword",name:"newuserPassword",placeholder:"Password",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",id:"newemail",name:"newemail",placeholder:"email",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Address:"),r.a.createElement("input",{type:"address",id:"newaddress",name:"newaddress",placeholder:"address",onChange:this.onChangeHandler}),r.a.createElement("label",null,"Balance:"),r.a.createElement("input",{type:"number",id:"newbalance",name:"newbalance",onChange:this.onChangeHandler}),r.a.createElement("button",{onClick:this.createUserHandler},"Update"))),r.a.createElement("h1",null,"Here are the movies you have purchased"),r.a.createElement("div",null,this.state.movieHTML))}}]),a}(n.Component),I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={signedIn:!1,movieId:0,user:{}},n.signingIn=n.signingIn.bind(Object(i.a)(n)),n.chooseMovie=n.chooseMovie.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"signingIn",value:function(e){this.setState({signedIn:!0,user:e})}},{key:"chooseMovie",value:function(e){this.setState({movieId:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.signedIn?r.a.createElement(w.a,null,r.a.createElement(k,null),r.a.createElement(E.a,{exact:!0,strict:!0,path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(y,{capture:e.chooseMovie}))}}),r.a.createElement(E.a,{path:"/Profile",render:function(){return r.a.createElement("div",null,r.a.createElement(j,{userId:e.state.user.id,userName:e.state.user.name,userEmail:e.state.user.email,userAddress:e.state.user.address,userPassword:e.state.user.password,userBalance:e.state.user.balance}))}}),r.a.createElement(E.a,{path:"/Movie",render:function(){return r.a.createElement("div",null,r.a.createElement(f,{id:e.state.movieId,userId:e.state.user.id,balance:e.state.user.balance,user:e.state.user}))}})):r.a.createElement(w.a,null,r.a.createElement(E.a,{exact:!0,strict:!0,path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(O,{Allowed:e.signingIn}))}}),r.a.createElement(E.a,{path:"/SignUp",render:function(){return r.a.createElement("div",null,r.a.createElement(C,null))}})),r.a.createElement("div",null,r.a.createElement("h4",null,"Information provided by"),r.a.createElement("img",{alt:"themoviedb",width:"300px",src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_long_1-8ba2ac31f354005783fab473602c34c3f4fd207150182061e425d366e4f34596.svg"})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.79981d84.chunk.js.map